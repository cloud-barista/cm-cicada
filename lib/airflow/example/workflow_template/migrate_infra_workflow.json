{
  "default_args": {
    "owner": "ish",
    "start_date": "2024-03-29",
    "retries": 0,
    "retry_delay_sec": 0
  },
  "description": "Migrate Server",
  "task_groups": [
    {
      "task_group_name": "migrate_infra",
      "description": "Migrate Server",
      "tasks": [
        {
          "task_name": "bash_task_echo_infra_migration_started",
          "task_component": "bash_task_echo",
          "operator": "airflow.operators.bash.BashOperator",
          "operator_options": [
            {
              "name": "bash_command",
              "value": "echo 'Infra migration is started.'"
            }
          ],
          "dependencies": []
        },
        {
          "task_name": "beetle_task_infra_migration",
          "task_component": "beetle_task_infra_migration",
          "operator": "airflow.providers.http.operators.http.SimpleHttpOperator",
          "operator_options": [
            {
              "name": "task_id",
              "value": "migrate_infra"
            },
            {
              "name": "http_conn_id",
              "value": "beetle_api"
            },
            {
              "name": "endpoint",
              "value": "/beetle/migration/infra"
            },
            {
              "name": "method",
              "value": "POST"
            },
            {
              "name": "data",
              "value": "{\n    \"name\": \"recommended-infra01\",\n    \"installMonAgent\": \"no\",\n    \"label\": \"DynamicVM\",\n    \"systemLabel\": \"\",\n    \"description\": \"Made in CB-TB\",\n    \"vm\": [\n        {\n            \"name\": \"recommended-vm01\",\n            \"subGroupSize\": \"3\",\n            \"label\": \"DynamicVM\",\n            \"description\": \"Description\",\n            \"commonSpec\": \"azure-koreacentral-standard-b4ms\",\n            \"commonImage\": \"ubuntu22-04\",\n            \"rootDiskType\": \"default\",\n            \"rootDiskSize\": \"default\",\n            \"vmUserPassword\": \"test\",\n            \"connectionName\": \"azure-koreacentral\"\n        }\n    ]\n}"
            },
            {
              "name": "headers",
              "value": {
                "Content-Type": "application/json"
              }
            }
          ],
          "dependencies": [
            "bash_task_echo_infra_migration_started"
          ]
        },
        {
          "task_name": "bash_task_echo_infra_migration_finished",
          "task_component": "bash_task_echo",
          "operator": "airflow.operators.bash.BashOperator",
          "operator_options": [
            {
              "name": "bash_command",
              "value": "echo 'Infra migration is finished.'"
            }
          ],
          "dependencies": [
            "beetle_task_infra_migration"
          ]
        }
      ]
    }
  ]
}
